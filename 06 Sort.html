<!DOCTYPE html>
<html lang='zh-CN'>
<head>
<meta charset='utf-8'>
<title></title>
<style type='text/css'>
    *{font-size: 14px;}
</style>
</head>
<body>
</body>
<script>
    /*

        算法

    */
    // 快速排序
    function sort(_arr) {
        var arr = copy(_arr);        
     　　if (arr.length <= 1) { 
            return arr; 
        }
        // var pivotIndex = Math.floor(arr.length / 2);
        // var pivot = arr.splice(pivotIndex, 1)[0];

        // 选哪个为基准不重要 干脆选第一个
        // 要把基准从数组中用splice删除
        var pivot = arr.splice(0, 1)[0];

     　　var left = [];
     　　var right = [];
     　　for (var i = 0; i < arr.length; i++){
     　　　　if (arr[i] < pivot) {
     　　　　　　left.push(arr[i]);
     　　　　} else {
     　　　　　　right.push(arr[i]);
     　　　　}
     　　}
        console.log('基准：' + pivot + ';左：' + left + ';右：' + right);
     　　return sort(left).concat([pivot], sort(right));
    };

    // 冒泡排序
    function sort1(_arr) {
        var arr = copy(_arr);
        for (var i = 0; i < arr.length; i++){
            for (var j = 0; j < arr.length - i; j++){
                if (arr[j] > arr[j + 1]){
                    swap(j,j+1,arr);
                    // console.log('————第'+j+'次：'+arr);
                }
            }
            console.log('第'+i+'趟结束：'+arr);
        }
        return arr;
    }

    // // 往前循环的冒泡排序 failed
    // function sort2(_arr) {
    //     var arr = copy(_arr);
    //     for(var i=0;i<arr.length;i++){
    //         for(j=i;j<arr.length;j++) {
    //             if(arr[j]>arr[j+1]) {
    //                 swap(j,j+1,arr)
    //             }
    //             console.log(arr);
    //         }
    //         console.log('------'+arr);
    //     }
    //     return arr;
    // }

    // 插入排序
    function sort3(array) {
        var len = array.length,
            i, j, tmp, result;
        
        // 设置数组副本
        result = array.slice(0);
        for(i=1; i < len; i++){
            tmp = result[i];
            j = i - 1;
            while(j>=0 && tmp < result[j]){
                result[j+1] = result[j];
                j--;
            }
            result[j+1] = tmp;
        }
        return result;
    }

    function sort4(_arr) {
        var i, j, temp;
        var array =  copy(_arr);

        for(i=1; i < array.length; i++){
            temp = array[i];
            j = i - 1;
            while(j>=0 && temp < array[j]){
                array[i] = array[j];
                j--;
                console.log('-'+array);
            }
            array[i] = temp;
            console.log('----------'+array);
        }
        return array;
    }



    /*

        抽象
        
    */
    // 抽象函数一 简单拷贝
    function copy(arr) {
        let res = []
        for (let i = 0; i < arr.length; i++) {
            res.push(arr[i])
        }
        return res;
    }
    function copy2(arr) {
        return arr.splce(0);
    }
    // 抽象函数二 交换元素
    function swap(i,j,array){
        var temp = array[j];
        array[j] = array[i];
        array[i] = temp;
    }



    /*

        测试
        
    */
    var array = [5,1,3,4,2,];
    // var array = [6,5,9,1,3,10,5,7,4,2,8];
    // var array = [5,1,'操你妈',3,4,2];
    // var array = [0, 100, -1, 5, 423423,1, 3, 2, 4,-90,8];
    // var array = [0, 100, -1, 5, 423423,1,'皇家马德里', 3, 2, 4,-90,8];

    document.write('<p>数组：'+array+'</p>');   
    // document.write('<p>快速：'+sort(array)+'</p>');     
    document.write('<p>插入：'+sort4(array)+'</p>');  
    // document.write('<p>第二种冒泡：'+sort2(array)+'</p>');     
</script>
</html>